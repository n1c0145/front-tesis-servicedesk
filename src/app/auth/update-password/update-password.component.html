<div class="min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 p-4 md:p-6">
  <div class="flex items-center gap-2 mb-6 p-3 bg-white rounded-lg shadow-sm border border-gray-200">
    <a [routerLink]="['/home']" class="no-underline">
      <button mat-button color="primary" class="rounded-full px-3 py-1 hover:bg-blue-50 transition-colors">
        <mat-icon class="mr-1 text-base">home</mat-icon>
        Inicio
      </button>
    </a>

    <mat-icon class="text-gray-400">chevron_right</mat-icon>

    <a [routerLink]="['/profile']" class="no-underline">
      <button mat-button color="primary" class="rounded-full px-3 py-1 hover:bg-blue-50 transition-colors">
        <mat-icon class="mr-1 text-base">person</mat-icon>
        Mi Perfil
      </button>
    </a>

    <mat-icon class="text-gray-400">chevron_right</mat-icon>

    <button mat-button disabled class="rounded-full px-3 py-1 text-gray-600 font-medium bg-gray-100">
      <mat-icon class="mr-1 text-base">lock_reset</mat-icon>
      Cambiar Contraseña
    </button>
  </div>

  <div class="flex justify-center">
    <mat-card class="w-full max-w-md shadow-lg rounded-xl overflow-hidden border border-gray-200">
      <div class="border-b border-gray-200 p-5 bg-gray-50">
        <div class="flex items-center justify-between">
          <div class="flex items-center">
            <div class="bg-gray-100 p-2 rounded-lg mr-3">
              <mat-icon class="text-gray-600">lock_reset</mat-icon>
            </div>
            <div>
              <h1 class="text-lg font-semibold text-gray-800">Cambiar Contraseña</h1>
              <p class="text-sm text-gray-500">Actualiza tu contraseña de acceso</p>
            </div>
          </div>

        </div>
      </div>

      <div class="p-6">
        <form [formGroup]="passwordForm" (ngSubmit)="updatePassword()" class="space-y-5">
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">
              Contraseña Actual *
            </label>
            <div class="relative">
              <mat-icon class="absolute left-3 top-3 text-gray-500">lock_clock</mat-icon>
              <input type="password" formControlName="old_password" placeholder="Ingresa tu contraseña actual"
                class="w-full pl-11 pr-10 py-2.5 border border-gray-300 rounded-md focus:ring-2 focus:ring-gray-400 focus:border-gray-400 outline-none transition-all text-sm"
                [class.border-red-300]="passwordForm.get('old_password')?.invalid && passwordForm.get('old_password')?.touched"
                [class.focus:ring-red-300]="passwordForm.get('old_password')?.invalid && passwordForm.get('old_password')?.touched">
              <button type="button" class="absolute right-3 top-3 text-gray-400 hover:text-gray-600">
              </button>
            </div>
            <div *ngIf="passwordForm.get('old_password')?.touched && passwordForm.get('old_password')?.invalid"
              class="mt-1 text-xs text-red-500">
              Ingresa tu contraseña actual
            </div>
          </div>

          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">
              Nueva Contraseña *
            </label>
            <div class="relative">
              <mat-icon class="absolute left-3 top-3 text-gray-500">lock</mat-icon>
              <input formControlName="new_password" placeholder="Ingresa tu nueva contraseña"
                class="w-full pl-11 pr-10 py-2.5 border border-gray-300 rounded-md focus:ring-2 focus:ring-gray-400 focus:border-gray-400 outline-none transition-all text-sm"
                [class.border-red-300]="passwordForm.get('new_password')?.invalid && passwordForm.get('new_password')?.touched"
                [class.focus:ring-red-300]="passwordForm.get('new_password')?.invalid && passwordForm.get('new_password')?.touched">
              <button type="button" class="absolute right-3 top-3 text-gray-400 hover:text-gray-600">
              </button>
            </div>
            <div *ngIf="passwordForm.get('new_password')?.touched && passwordForm.get('new_password')?.invalid"
              class="mt-1 text-xs text-red-500 space-y-1">
              <div *ngIf="passwordForm.get('new_password')?.errors?.['required']">Ingresa una contraseña</div>
              <div *ngIf="passwordForm.get('new_password')?.errors?.['minlength']">Debe tener al menos 8 caracteres
              </div>
              <div *ngIf="passwordForm.get('new_password')?.errors?.['uppercase']">Debe tener al menos una letra
                mayúscula</div>
              <div *ngIf="passwordForm.get('new_password')?.errors?.['number']">Debe tener al menos un número</div>
              <div *ngIf="passwordForm.get('new_password')?.errors?.['special']">Debe tener al menos un carácter
                especial</div>
            </div>
          </div>

          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">
              Repetir Nueva Contraseña *
            </label>
            <div class="relative">
              <mat-icon class="absolute left-3 top-3 text-gray-500">lock_reset</mat-icon>
              <input formControlName="repeat_new_password" placeholder="Repite tu nueva contraseña"
                class="w-full pl-11 pr-10 py-2.5 border border-gray-300 rounded-md focus:ring-2 focus:ring-gray-400 focus:border-gray-400 outline-none transition-all text-sm"
                [class.border-red-300]="passwordForm.get('repeat_new_password')?.invalid && passwordForm.get('repeat_new_password')?.touched"
                [class.focus:ring-red-300]="passwordForm.get('repeat_new_password')?.invalid && passwordForm.get('repeat_new_password')?.touched">
              <button type="button" class="absolute right-3 top-3 text-gray-400 hover:text-gray-600">
              </button>
            </div>
            <div
              *ngIf="passwordForm.get('repeat_new_password')?.touched && passwordForm.get('repeat_new_password')?.invalid"
              class="mt-1 text-xs text-red-500 space-y-1">
              <div *ngIf="passwordForm.get('repeat_new_password')?.errors?.['required']">Repite la contraseña</div>
              <div *ngIf="passwordForm.get('repeat_new_password')?.errors?.['mismatch']">Las contraseñas no coinciden
              </div>
            </div>
          </div>

          <div [matTooltip]="passwordForm.invalid ? 'Completa todos los campos para actualizar tu contraseña' : ''"
            class="pt-2">
            <button mat-raised-button
              class="w-full py-2.5 text-sm font-medium transition-all duration-300 bg-gray-700 text-white hover:bg-gray-800"
              type="submit" [disabled]="passwordForm.invalid">
              <mat-icon class="mr-2 text-base">lock_reset</mat-icon>
              Actualizar Contraseña
            </button>
          </div>
        </form>
      </div>
    </mat-card>
  </div>
</div>

<app-loading [loading]="isLoading"></app-loading>